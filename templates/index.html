<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Multimodal Sentiment Analysis</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>üé≠ Multimodal Sentiment Analysis</h1>
        <p class="subtitle">Combining Text & Facial Emotion Recognition</p>
      </header>

      <div class="main-content">
        <!-- Text Input Section -->
        <div class="section">
          <h2>üìù Text Input</h2>
          <textarea
            id="textInput"
            placeholder="Enter your text here... (e.g., 'I am having a great day!')"
          ></textarea>
          <button id="analyzeTextBtn" class="btn btn-primary">
            Analyze Text
          </button>
        </div>

        <!-- Webcam Section -->
        <div class="section">
          <h2>üì∑ Facial Emotion</h2>
          <div class="webcam-container">
            <video id="webcam" autoplay playsinline></video>
            <canvas id="canvas" style="display: none"></canvas>
          </div>
          <div class="webcam-controls">
            <button id="startWebcamBtn" class="btn btn-secondary">
              Start Webcam
            </button>
            <button id="captureBtn" class="btn btn-primary" disabled>
              Capture & Analyze
            </button>
          </div>
        </div>

        <!-- Multimodal Analysis Section -->
        <div class="section">
          <h2>üîÄ Multimodal Analysis</h2>
          <p class="info-text">
            Enter text and capture your face for comprehensive sentiment
            analysis
          </p>
          <button id="analyzeMultimodalBtn" class="btn btn-accent" disabled>
            Analyze Both
          </button>
        </div>
      </div>

      <!-- Results Section -->
      <div class="results-container">
        <h2>üìä Results</h2>

        <!-- Text Results -->
        <div id="textResults" class="result-card" style="display: none">
          <h3>Text Sentiment</h3>
          <div class="prediction">
            <span class="label">Prediction:</span>
            <span id="textPrediction" class="prediction-value"></span>
          </div>
          <div class="confidence">
            <span class="label">Confidence:</span>
            <div class="confidence-bar">
              <div id="textConfidenceBar" class="confidence-fill"></div>
            </div>
            <span id="textConfidence" class="confidence-value"></span>
          </div>
          <div class="probabilities" id="textProbabilities"></div>
        </div>

        <!-- Face Results -->
        <div id="faceResults" class="result-card" style="display: none">
          <h3>Facial Emotion</h3>
          <div class="prediction">
            <span class="label">Prediction:</span>
            <span id="facePrediction" class="prediction-value"></span>
          </div>
          <div class="confidence">
            <span class="label">Confidence:</span>
            <div class="confidence-bar">
              <div id="faceConfidenceBar" class="confidence-fill"></div>
            </div>
            <span id="faceConfidence" class="confidence-value"></span>
          </div>
          <div class="probabilities" id="faceProbabilities"></div>
        </div>

        <!-- Multimodal Results -->
        <div
          id="multimodalResults"
          class="result-card multimodal"
          style="display: none"
        >
          <h3>üéØ Combined Analysis</h3>
          <div class="prediction">
            <span class="label">Final Prediction:</span>
            <span id="multimodalPrediction" class="prediction-value"></span>
          </div>
          <div class="confidence">
            <span class="label">Confidence:</span>
            <div class="confidence-bar">
              <div id="multimodalConfidenceBar" class="confidence-fill"></div>
            </div>
            <span id="multimodalConfidence" class="confidence-value"></span>
          </div>
          <div class="agreement" id="agreementStatus"></div>
        </div>
      </div>

      <!-- Status Messages -->
      <div
        id="statusMessage"
        class="status-message"
        style="display: none"
      ></div>
    </div>

    <footer>
      <p>
        Multimodal Sentiment Analysis System | Text (LSTM) + Face (CNN) Fusion
      </p>
    </footer>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
  </body>
</html>
